@model List<Tuple<TinyHouseProje.Models.Rezervasyon, string>>

@{
    ViewBag.Title = "Rezervasyonlarım";
}

<h2>Yaptığınız Rezervasyonlar</h2>

@if (Model.Count == 0)
{
    <p>Herhangi bir rezervasyonunuz bulunmamaktadır.</p>
}
else
{
    <table class="table table-striped">
        <tr>
            <th>Ev Başlığı</th>
            <th>Başlangıç</th>
            <th>Bitiş</th>
            <th>Durum</th>
            <th>İşlem</th>
            <th>Yorum</th> @* <-- Yeni sütun *@
        </tr>

        @foreach (var item in Model)
        {
            var r = item.Item1;
            var baslik = item.Item2;

            <tr>
                <td>@baslik</td>
                <td>@r.BaslangicTarihi.ToShortDateString()</td>
                <td>@r.BitisTarihi.ToShortDateString()</td>
                <td>
                    @if (r.OnayDurumu)
                    {
                        <span class="text-success">Onaylandı</span>
                    }
                    else
                    {
                        <span class="text-warning">Bekliyor</span>
                    }
                </td>
                <td>
                    @if (!r.OnayDurumu)
                    {
                        @Html.ActionLink("İptal Et", "Iptal", "Rezervasyon", new { id = r.RezervasyonID }, new { @class = "btn btn-danger btn-sm" })
                    }
                    else
                    {
                        <span>-</span>
                    }
                </td>
                <td>
                    @if (r.OnayDurumu && r.BitisTarihi < DateTime.Now)
                    {
                        <a href="@Url.Action("Ekle", "Yorum", new { rezervasyonId = r.RezervasyonID })" class="btn btn-warning btn-sm">Yorum Yap</a>
                    }
                    else
                    {
                        <span class="text-muted">Müsait Değil</span>
                    }
                </td>
            </tr>
        }
    </table>
}
